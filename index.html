<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Speed of Sound – Resonance Tube</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f7fa; margin: 0; padding: 20px; line-height: 1.5; }
    h1, h2 { color: #1f2937; margin: 0 0 8px 0; }
    h3 { margin: 18px 0 8px; }
    .container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 1200px; margin: auto; }
    .card { background: white; border-radius: 12px; padding: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    canvas { width: 100%; height: 260px; background: #0f172a; border-radius: 8px; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, select { width: 100%; }
    .muted { color: #6b7280; font-size: 0.92em; }
    .readout { background:#eef2ff; padding:10px; border-radius:8px; margin-top:10px; font-size:0.95em; }
    table { width: 100%; border-collapse: collapse; margin-top: 6px; }
    th, td { border: 1px solid #111827; padding: 8px; vertical-align: top; }
    th { background: #f3f4f6; text-align: left; }
    .pill {
      display:inline-block; padding: 2px 8px; border-radius: 999px; background:#f3f4f6; border:1px solid #e5e7eb;
      font-size: 0.85em; margin-left: 6px;
    }
    .ok { background:#ecfdf5; border-color:#10b98133; }
    .warn { background:#fffbeb; border-color:#f59e0b33; }
    .bad { background:#fef2f2; border-color:#ef444433; }
  
    .linkbar { display:flex; flex-wrap:wrap; gap:10px; margin: 14px 0 18px; }
    .btnlink {
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:10px;
      background:#111827; color:#ffffff; text-decoration:none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.10);
      font-weight:600; font-size:0.95em;
    }
    .btnlink:hover { filter: brightness(1.08); }
    .btnlink.secondary { background:#1d4ed8; }
    .btnlink.tertiary { background:#059669; }
    .card.full { grid-column: 1 / -1; }
    .quiz q { quotes: "“" "”" "‘" "’"; }
    .quiz .qblock { border:1px solid #e5e7eb; border-radius:10px; padding:12px; margin:10px 0; background:#fafafa; }
    .quiz .choices { margin:8px 0 0 0; padding-left: 18px; }
    .quiz .choices li { margin:6px 0; }
    .quiz .feedback { margin-top:8px; font-weight:700; }
    .quiz button { margin-top:10px; padding:10px 12px; border:0; border-radius:10px; background:#111827; color:#fff; font-weight:700; cursor:pointer; }
    .quiz button:hover { filter: brightness(1.08); }
    details { background:#fff; border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px; margin:10px 0; }
    details summary { cursor:pointer; font-weight:700; }

  </style>
</head>
<body>

<h1>Speed of Sound in Air – Resonance Tube Experiment</h1>
<p class="muted">Adjust the sliders and watch how temperature (sound speed), impedance (reflection), and resonance conditions shape the wave.</p>


<div class="linkbar" aria-label="External physics applets">
  <a class="btnlink" href="https://physics.bu.edu/~duffy/HTML5/longitudinal_standing_wave.html" target="_blank" rel="noopener">Longitudinal Standing Wave</a>
  <a class="btnlink secondary" href="https://physics.bu.edu/~duffy/HTML5/transverse_standing_wave.html" target="_blank" rel="noopener">Transverse Standing Wave</a>
  <a class="btnlink tertiary" href="https://physics.bu.edu/~duffy/HTML5/speed_of_sound.html" target="_blank" rel="noopener">Speed of Sound</a>
</div>


<div class="container">

  <div class="card">
    <h2>Standing Wave Visualization</h2>
    <canvas id="waveCanvas" width="700" height="260"></canvas>

    <label>Wave View</label>
    <select id="waveView">
      <option value="standing">Standing Wave (result)</option>
      <option value="components">Incident + Reflected (build-up)</option>
    </select>

    <label>Variable</label>
    <select id="mode">
      <option value="displacement">Displacement</option>
      <option value="pressure">Pressure</option>
    </select>

    <label>Frequency (Hz)</label>
    <input type="range" id="freq" min="100" max="600" value="256" />
    <span id="freqVal"></span>

    <label>Air Column Length (m)</label>
    <input type="range" id="length" min="0.10" max="1.00" step="0.01" value="0.33" />
    <span id="lenVal"></span>

    <label>Air Temperature (°C)</label>
    <input type="range" id="temp" min="0" max="40" value="20" />
    <span id="tempVal"></span>

    <label>Liquid Impedance (relative to air)</label>
    <input type="range" id="imp" min="0.2" max="5" step="0.1" value="1" />
    <span id="impVal"></span>

    <div class="readout">
      λ = <span id="lambdaOut"></span> m<br>
      c = <span id="cOut"></span> m/s<br>
      k = <span id="kOut"></span> rad/m<br>
      Reflection coefficient R = <span id="rOut"></span><br>
      Closest resonance (odd harmonics): <span id="resOut"></span>
    </div>

    <p class="muted" style="margin-top:10px;">
      Boundary reminder (closed–open tube): closed end → <b>displacement node</b> / <b>pressure antinode</b>.
      Open end → <b>displacement antinode</b> / <b>pressure node</b>.
    </p>
  </div>

  <div class="card">
    <h2>Conceptual Links</h2>

    <h3>1) Temperature and Sound Speed</h3>
    <p class="muted">Model used: <b>c ≈ 331 + 0.6T</b>. This changes λ = c/f, so resonance lengths shift with temperature.</p>
    <table>
      <tr><th>Temp</th><th>c(T)</th><th>What it does in the tube</th></tr>
      <tr>
        <td><span id="Tnow"></span> °C</td>
        <td><span id="cnow"></span> m/s</td>
        <td>At fixed f, higher T → larger λ → resonance occurs at longer L.</td>
      </tr>
    </table>

    <h3>2) Liquid Impedance & Reflection</h3>
    <p class="muted">Reflection strength depends on impedance mismatch. Here we use a simple ratio Z<sub>liq</sub>/Z<sub>air</sub> and compute <b>R = (Z−1)/(Z+1)</b>.</p>
    <table>
      <tr><th>Z ratio</th><th>R</th><th>Expected observation</th><th>Example liquid</th></tr>
      <tr>
        <td><span id="Znow"></span></td>
        <td><span id="Rnow"></span></td>
        <td><span id="reflectStory"></span> <span id="reflectBadge" class="pill"></span></td>
        <td><span id="liqExample"></span></td>
      </tr>
    </table>

    <h3>3) Pressure vs Displacement</h3>
    <p class="muted">Same wave, different variable. In space they are shifted by λ/4: displacement ∝ sin(kx), pressure ∝ cos(kx).</p>
    <table>
      <tr><th>Tube end</th><th>Displacement</th><th>Pressure</th></tr>
      <tr><td>Closed (liquid)</td><td>Node</td><td>Antinode</td></tr>
      <tr><td>Open end</td><td>Antinode</td><td>Node</td></tr>
    </table>

    <h3>4) Resonance targets (closed–open)</h3>
    <p class="muted">Resonance lengths are odd quarter-wavelengths: L ≈ (2n−1)λ/4. The table updates with your current λ.</p>
    <table>
      <tr><th>Resonance</th><th>Length</th><th>Difference from your L</th></tr>
      <tr><td>1st</td><td><span id="L1"></span> m</td><td><span id="d1"></span></td></tr>
      <tr><td>2nd</td><td><span id="L3"></span> m</td><td><span id="d3"></span></td></tr>
      <tr><td>3rd</td><td><span id="L5"></span> m</td><td><span id="d5"></span></td></tr>
    </table>
  </div>

  <div class="card full">
    <h2>Practice Questions</h2>
    <p class="muted">These questions are taken from the attached worksheet, and are meant to pair with the simulations above.</p>

    <h3>Multiple-choice (MCQ)</h3>
    <div class="quiz" id="mcqQuiz">
      <div class="qblock" data-answer="B">
        <div><b>1.</b> Standing waves form only when:</div>
        <ol class="choices" type="A">
          <li><label><input type="radio" name="q1" value="A"> The amplitude of the wave is large</label></li>
          <li><label><input type="radio" name="q1" value="B"> The frequency matches a natural resonant frequency of the system</label></li>
          <li><label><input type="radio" name="q1" value="C"> Energy is continuously added regardless of frequency</label></li>
          <li><label><input type="radio" name="q1" value="D"> The wavelength exceeds the size of the medium</label></li>
        </ol>
        <div class="feedback" id="fb1"></div>
      </div>

      <div class="qblock" data-answer="C">
        <div><b>2.</b> Resonance causes:</div>
        <ol class="choices" type="A">
          <li><label><input type="radio" name="q2" value="A"> Conversion of waves into particles</label></li>
          <li><label><input type="radio" name="q2" value="B"> A collapse of the wave because of destructive interference</label></li>
          <li><label><input type="radio" name="q2" value="C"> A rapid increase in amplitude due to energy accumulation</label></li>
          <li><label><input type="radio" name="q2" value="D"> A change in mass of the medium</label></li>
        </ol>
        <div class="feedback" id="fb2"></div>
      </div>

      <div class="qblock" data-answer="B">
        <div><b>3.</b> In the Bohr model, only certain orbits are allowed because:</div>
        <ol class="choices" type="A">
          <li><label><input type="radio" name="q3" value="A"> Electrons move randomly</label></li>
          <li><label><input type="radio" name="q3" value="B"> Only specific wavelengths fit perfectly into a stable standing wave pattern</label></li>
          <li><label><input type="radio" name="q3" value="C"> Electrons are pushed around by gravity</label></li>
          <li><label><input type="radio" name="q3" value="D"> Electrons repel photons</label></li>
        </ol>
        <div class="feedback" id="fb3"></div>
      </div>

      <div class="qblock" data-answer="C">
        <div><b>4.</b> Photons could not escape before recombination because:</div>
        <ol class="choices" type="A">
          <li><label><input type="radio" name="q4" value="A"> There were no photons yet</label></li>
          <li><label><input type="radio" name="q4" value="B"> The universe had no atoms</label></li>
          <li><label><input type="radio" name="q4" value="C"> Continuous scattering prevented photons from travelling freely</label></li>
          <li><label><input type="radio" name="q4" value="D"> Gravity trapped light</label></li>
        </ol>
        <div class="feedback" id="fb4"></div>
      </div>

      <button type="button" id="checkMcqBtn">Check answers</button>
      <p class="muted" id="mcqScore" style="margin-top:10px;"></p>
    </div>

    <h3>Longer Q&amp;A (SL &amp; HL)</h3>

    <details>
      <summary>Q1 — Standing Waves and Resonance (wire fixed at both ends)</summary>
      <p><b>Prompt:</b> A metal wire of length 0.80 m is fixed at both ends. The fundamental resonant frequency is 120 Hz.</p>
      <ol type="a">
        <li>Define the term <i>standing wave</i>. (2)</li>
        <li>Draw and label a diagram showing the fundamental mode and the second harmonic. (2)</li>
        <li>State the relationship between the wavelength of the fundamental and the length of the wire. (1)</li>
        <li>Calculate the wave speed. (2)</li>
        <li>Explain why large amplitude vibrations occur when the wire is driven close to its natural frequency. (3)</li>
      </ol>
      <p><b>Model answer (outline):</b></p>
      <ul>
        <li>Standing wave: superposition of two identical waves travelling in opposite directions → fixed nodes and antinodes.</li>
        <li>Fundamental: one antinode; second harmonic: two antinodes (with nodes at both ends).</li>
        <li>Fundamental relation: λ<sub>1</sub> = 2L.</li>
        <li>Wave speed: v = fλ = 120 × (2×0.80) = 192 m/s.</li>
        <li>Resonance: driving near a natural frequency keeps the forcing in phase → constructive interference → energy accumulates → large amplitude.</li>
      </ul>
    </details>

    <details>
      <summary>Q2 — Bohr Quantisation and Standing Waves (hydrogen)</summary>
      <ol type="a">
        <li>State the standing-wave condition for an electron orbit in the Bohr model. (2)</li>
        <li>Explain how hydrogen’s discrete emission spectrum provides evidence for this model. (3)</li>
        <li>Calculate the wavelength of the emitted photon when an electron falls from n = 3 to n = 2, using E<sub>n</sub> = −13.6/n<sup>2</sup> eV and hc = 1240 eV·nm. (3)</li>
      </ol>
      <p><b>Model answer (outline):</b></p>
      <ul>
        <li>Condition: 2πr = nλ (n = 1, 2, 3, ...).</li>
        <li>Line spectrum implies quantised energy levels; transitions emit/absorb photons with ΔE = hf = hc/λ.</li>
        <li>E<sub>3</sub> = −13.6/9 = −1.51 eV; E<sub>2</sub> = −13.6/4 = −3.40 eV → ΔE = 1.89 eV → λ = 1240/1.89 ≈ 656 nm.</li>
      </ul>
    </details>

    <details>
      <summary>Q3 — Antenna Resonance (HL)</summary>
      <ol type="a">
        <li>Explain why only certain frequencies are efficiently received by an antenna. (3)</li>
        <li>An antenna of length 1.5 m resonates at the half-wavelength mode. Calculate the resonant frequency using c = 3.0×10<sup>8</sup> m/s. (3)</li>
        <li>Explain the analogy between tuning a radio and exciting a particular Bohr orbit. (3)</li>
      </ol>
      <p><b>Model answer (outline):</b></p>
      <ul>
        <li>Standing EM waves form on the antenna; when length matches an allowed fraction of λ, reflections reinforce (constructive interference) → strong currents.</li>
        <li>Half-wave: λ = 2L = 3.0 m → f = c/λ = (3.0×10<sup>8</sup>)/3.0 = 1.0×10<sup>8</sup> Hz.</li>
        <li>Radio tuning selects one resonant frequency (LC circuit), just as Bohr orbits allow only integer-wavelength standing states; non-resonant states are suppressed.</li>
      </ul>
    </details>

    <details>
      <summary>Q4 — CMB and Standing Waves in the Early Universe (HL)</summary>
      <ol type="a">
        <li>Explain why photons could not travel freely before recombination. (2)</li>
        <li>Describe how acoustic standing waves formed in the early-universe plasma. (3)</li>
        <li>The CMB power spectrum shows discrete peaks. Explain how this supports standing-wave behaviour. (3)</li>
        <li>Discuss the analogy between standing waves in a cavity and resonant photon modes at the surface of last scattering. (4)</li>
      </ol>
      <p><b>Model answer (outline):</b></p>
      <ul>
        <li>Photon trapping: frequent Thomson scattering off free electrons → very short mean free path → opaque universe.</li>
        <li>Gravity compresses overdensities; radiation pressure pushes back → oscillations (compressions/rarefactions) in photon–baryon fluid.</li>
        <li>Peaks correspond to modes that completed specific fractions of oscillations by recombination → harmonic structure indicates standing waves.</li>
        <li>Like a cavity, geometry/horizon size selects which modes “fit”; resonant modes survive and are imprinted at recombination, while non-resonant modes are damped.</li>
      </ul>
    </details>

    <details>
      <summary>Q5 — Data-based CMB Peaks (HL)</summary>
      <ol type="a">
        <li>State the physical meaning of the first acoustic peak. (2)</li>
        <li>The position corresponds to about 1° on the sky. Explain why this represents the fundamental mode. (3)</li>
        <li>Explain why higher-order peaks appear at integer multiples of the fundamental frequency. (3)</li>
        <li>Evaluate: “The ripples in the CMB are like the harmonics of a musical instrument.” (4)</li>
      </ol>
      <p><b>Model answer (outline):</b></p>
      <ul>
        <li>First peak: largest-scale compression mode (fundamental) that could oscillate coherently by recombination.</li>
        <li>~1° corresponds to the horizon-sized scale at recombination: larger scales couldn’t oscillate coherently; hence this is the fundamental.</li>
        <li>Higher peaks: modes that completed additional half-cycles → harmonic series (approx. integer multiples).</li>
        <li>Analogy is useful (discrete modes from boundary conditions) but limited (expansion + gravity–radiation coupling ≠ ideal instrument).</li>
      </ul>
    </details>

  </div>


</div>

<script>
// --- DOM ---
const canvas = document.getElementById("waveCanvas");
const ctx = canvas.getContext("2d");

const freqSlider = document.getElementById("freq");
const lenSlider = document.getElementById("length");
const tempSlider = document.getElementById("temp");
const impSlider  = document.getElementById("imp");
const modeSelect = document.getElementById("mode");
const waveView   = document.getElementById("waveView");

const freqVal = document.getElementById("freqVal");
const lenVal  = document.getElementById("lenVal");
const tempVal = document.getElementById("tempVal");
const impVal  = document.getElementById("impVal");

const lambdaOut = document.getElementById("lambdaOut");
const cOut      = document.getElementById("cOut");
const kOut      = document.getElementById("kOut");
const rOut      = document.getElementById("rOut");
const resOut    = document.getElementById("resOut");

// Right panel dynamic fields
const Tnow = document.getElementById("Tnow");
const cnow = document.getElementById("cnow");
const Znow = document.getElementById("Znow");
const Rnow = document.getElementById("Rnow");
const reflectStory = document.getElementById("reflectStory");
const reflectBadge = document.getElementById("reflectBadge");
const liqExample = document.getElementById("liqExample");

const L1 = document.getElementById("L1");
const L3 = document.getElementById("L3");
const L5 = document.getElementById("L5");
const d1 = document.getElementById("d1");
const d3 = document.getElementById("d3");
const d5 = document.getElementById("d5");

// --- Model helpers ---
function soundSpeed(Tc){
  // Simple classroom model
  return 331 + 0.6 * Tc;
}

function reflectionCoeff(Zratio){
  return (Zratio - 1) / (Zratio + 1);
}

function liquidExample(Zratio){
  // qualitative mapping, just for narrative
  if (Zratio < 0.7) return "Very light oil / boundary nearly matched";
  if (Zratio < 1.4) return "Air-like boundary (weak reflection)";
  if (Zratio < 2.6) return "Water (typical strong reflection)";
  if (Zratio < 4.2) return "Salt water / glycerol mix (stronger reflection)";
  return "Glycerol-heavy / near-rigid boundary";
}

function badgeForR(absR){
  reflectBadge.classList.remove("ok","warn","bad");
  if (absR < 0.25){ reflectBadge.textContent = "weak"; reflectBadge.classList.add("bad"); }
  else if (absR < 0.6){ reflectBadge.textContent = "moderate"; reflectBadge.classList.add("warn"); }
  else { reflectBadge.textContent = "strong"; reflectBadge.classList.add("ok"); }
}

function fmtDiff(x){
  const ax = Math.abs(x);
  const sign = x >= 0 ? "+" : "−";
  return sign + ax.toFixed(2) + " m";
}

function computeState(){
  const f = Number(freqSlider.value);
  const L = Number(lenSlider.value);
  const T = Number(tempSlider.value);
  const Zratio = Number(impSlider.value);

  const c = soundSpeed(T);
  const lambda = c / f;
  const k = 2 * Math.PI / lambda;
  const R = reflectionCoeff(Zratio);

  // closed-open resonances: (2n-1)lambda/4 => 1,3,5,...
  const targets = [1,3,5].map(m => (m * lambda) / 4);

  // closest odd resonance among first few (up to 9)
  let best = {m:1, L: lambda/4, err: Math.abs(L - lambda/4)};
  for (let m of [1,3,5,7,9]){
    const Lt = (m*lambda)/4;
    const e = Math.abs(L - Lt);
    if (e < best.err) best = {m, L: Lt, err: e};
  }

  return {f,L,T,Zratio,c,lambda,k,R,targets,best};
}

function updateUI(){
  const s = computeState();

  // slider labels
  freqVal.textContent = s.f + " Hz";
  lenVal.textContent  = s.L.toFixed(2) + " m";
  tempVal.textContent = s.T + " °C";
  impVal.textContent  = s.Zratio.toFixed(1);

  // readout
  lambdaOut.textContent = s.lambda.toFixed(2);
  cOut.textContent      = s.c.toFixed(1);
  kOut.textContent      = s.k.toFixed(2);
  rOut.textContent      = s.R.toFixed(2);
  resOut.textContent    = "m = " + s.best.m + "  (target L ≈ " + s.best.L.toFixed(2) + " m; |Δ|=" + s.best.err.toFixed(2) + ")";

  // right panel dynamic
  Tnow.textContent = s.T;
  cnow.textContent = s.c.toFixed(1);
  Znow.textContent = s.Zratio.toFixed(1);
  Rnow.textContent = s.R.toFixed(2);

  const absR = Math.abs(s.R);
  badgeForR(absR);
  if (absR < 0.25) reflectStory.textContent = "Standing wave may look flat; resonance peak broad.";
  else if (absR < 0.6) reflectStory.textContent = "Visible standing pattern; resonance noticeable.";
  else reflectStory.textContent = "Strong reflection; crisp nodes/antinodes.";

  liqExample.textContent = liquidExample(s.Zratio);

  const [Lq1,Lq3,Lq5] = s.targets;
  L1.textContent = Lq1.toFixed(2);
  L3.textContent = Lq3.toFixed(2);
  L5.textContent = Lq5.toFixed(2);

  d1.textContent = fmtDiff(s.L - Lq1);
  d3.textContent = fmtDiff(s.L - Lq3);
  d5.textContent = fmtDiff(s.L - Lq5);
}

// --- Drawing ---
let t = 0;

function draw(){
  const s = computeState();
  const mode = modeSelect.value;

  // Clear
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // baseline
  ctx.strokeStyle = "rgba(255,255,255,0.10)";
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(0, canvas.height/2);
  ctx.lineTo(canvas.width, canvas.height/2);
  ctx.stroke();

  // wave
  const R = s.R;
  const absR = Math.abs(R);

  // Scale a bit so low-reflection still shows something
  const amp = 0.15 + 0.85*absR;

  ctx.beginPath();
  ctx.strokeStyle = (mode === "displacement") ? "#38bdf8" : "#fbbf24";
  ctx.lineWidth = 2;

  for (let x=0; x<canvas.width; x++){
    const pos = (x/canvas.width) * s.L;
    let y;

    if (waveView.value === "components"){
      // incident + reflected travelling waves; pressure/displacement selection changes which variable we sketch
      // Using a simple phase choice: displacement ~ sin(), pressure ~ cos()
      const phase = 2*Math.PI*s.f*t;
      if (mode === "displacement"){
        const inc = Math.sin(s.k*pos - phase);
        const ref = R * Math.sin(s.k*pos + phase);
        y = amp * (inc + ref);
      } else {
        const inc = Math.cos(s.k*pos - phase);
        const ref = R * Math.cos(s.k*pos + phase);
        y = amp * (inc + ref);
      }
    } else {
      // standing wave forms
      const phase = 2*Math.PI*s.f*t;
      if (mode === "displacement"){
        y = amp * Math.sin(s.k*pos) * Math.cos(phase);
      } else {
        y = amp * Math.cos(s.k*pos) * Math.cos(phase);
      }
    }

    const drawY = canvas.height/2 - y*90;
    if (x===0) ctx.moveTo(x, drawY);
    else ctx.lineTo(x, drawY);
  }
  ctx.stroke();

  // Resonance highlight (soft flash when near the nearest odd-quarter resonance)
  const near = s.best.err < 0.02;
  if (near){
    ctx.fillStyle = "rgba(255,255,255,0.07)";
    ctx.fillRect(0,0,canvas.width,canvas.height);
  }

  // End markers with impedance cue
  // Closed (liquid) end — strong mismatch
  ctx.fillStyle = "#f87171";
  ctx.fillRect(0,0,6,canvas.height);
  // Open end — colour shows effective reflection strength
  const openReflect = Math.min(Math.abs(s.R),1);
  const g = Math.floor(200 - 120*openReflect);
  ctx.fillStyle = `rgb(${g},220,${g})`;
  ctx.fillRect(canvas.width-6,0,6,canvas.height);

  // Label text
  ctx.fillStyle = "rgba(255,255,255,0.8)";
  ctx.font = "12px Arial";
  ctx.fillText("closed end", 12, 18);
  const txt = "open end";
  const w = ctx.measureText(txt).width;
  ctx.fillText(txt, canvas.width - w - 12, 18);
}

function tick(){
  t += 0.008;
  updateUI();
  draw();
  requestAnimationFrame(tick);
}

// Bind all controls
[freqSlider, lenSlider, tempSlider, impSlider, modeSelect, waveView].forEach(el => {
  el.addEventListener("input", updateUI);
  el.addEventListener("change", updateUI);
});

updateUI();
tick();

// --- MCQ quiz logic ---
const checkMcqBtn = document.getElementById("checkMcqBtn");
if (checkMcqBtn){
  checkMcqBtn.addEventListener("click", () => {
    const blocks = Array.from(document.querySelectorAll("#mcqQuiz .qblock"));
    let correct = 0;
    blocks.forEach((block, i) => {
      const ans = block.getAttribute("data-answer");
      const qn = "q" + (i+1);
      const chosen = (document.querySelector(`input[name="${qn}"]:checked`) || {}).value;
      const fb = document.getElementById("fb" + (i+1));
      if (!chosen){
        fb.textContent = "Choose an answer.";
        fb.style.color = "#b91c1c";
        return;
      }
      if (chosen === ans){
        correct += 1;
        fb.textContent = "Correct ✔";
        fb.style.color = "#047857";
      } else {
        fb.textContent = `Not quite — correct answer is ${ans}.`;
        fb.style.color = "#b45309";
      }
    });
    const scoreEl = document.getElementById("mcqScore");
    if (scoreEl) scoreEl.textContent = `Score: ${correct} / ${blocks.length}`;
  });
}

</script>

</body>
</html>












